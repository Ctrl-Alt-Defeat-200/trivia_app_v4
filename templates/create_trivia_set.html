<!-- this is the create trivia set template without JavaScript -->
<!DOCTYPE html>
<html>
  <head>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Autour+One&display=swap" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='trivia_set.css') }}">
    <title>Create Trivia Set</title>
</head>
<body>
    <h1>Create Trivia Set</h1>
    <form method="POST" action="{{ url_for('create_trivia_set') }}">
        <label for="set_title">Set Title:</label>
        <input type="text" id="set_title" name="set_title" required><br>

        <label for="category">Category:</label>
        <input type="text" id="category" name="category" required><br /><br />

        <label for="difficulty">Difficulty:</label>
        <select id="difficulty" name="difficulty" required>
            <option value="easy">Easy</option>
            <option value="medium">Medium</option>
            <option value="hard">Hard</option>
        </select><br>

      <!-- Questions and Options -->
      <div id="questions-container">
        <!--This is where dynamically added q's will show-->
      </div>
      <button type="button" id="add-question" class="action-button">Add Question</button>

      <input type="submit" value="Create Trivia Set" class="action-button" />
    </form>

    <br />
    <a href="{{url_for('dashboard')}}"class="button-link">Back to Dashboard</a><br /><br />

    <!-- JavaScript code for adding questions and options dynamically -->

    <script>
        const addQuestionButton = document.getElementById("add-question");
        const questionsContainer = document.getElementById("questions-container");

        let questionIndex = 0;

        addQuestionButton.addEventListener("click", () => {
            const questionDiv = document.createElement("div");
            questionDiv.innerHTML = `
                <hr />
                <label for="question_${questionIndex}">Question:</label>
                <input type="text" id="question_${questionIndex}" name="question_${questionIndex}" required /><br /><br />
                
                <label for="question_type_${questionIndex}">Question Type:</label>
                <select id="question_type_${questionIndex}" name="question_type_${questionIndex}" required>
                    <option value="multiple_choice">Multiple Choice</option>
                    <option value="open_ended">Open Ended</option>
                </select><br /><br />
                
                <div id="options-container_${questionIndex}">
                    <!-- This is where dynamically added options will appear -->
                </div>
                <div id="correct-answer-container_${questionIndex}">
                    <!-- This is where the correct answer for open-ended questions will appear -->
                </div>
                <button type="button" id="add-option_${questionIndex}" class="add-option-button">Add Option</button>
            `;

            questionsContainer.appendChild(questionDiv);

            // Add an event listener for the "Add Option" button for this question
            const addOptionButton = document.getElementById(`add-option_${questionIndex}`);
            const optionsContainer = document.getElementById(`options-container_${questionIndex}`);
            const correctAnswerContainer = document.getElementById(`correct-answer-container_${questionIndex}`);
            let optionIndex = 0;

            addOptionButton.addEventListener("click", () => {
                const optionDiv = document.createElement("div");
                optionDiv.innerHTML = `
                    <label for="option_${questionIndex}_${optionIndex}">Option:</label>
                    <input type="text" id="option_${questionIndex}_${optionIndex}" name="option_${questionIndex}_${optionIndex}" required /><br /><br />

                    <label for="is_correct_${questionIndex}_${optionIndex}">Is Correct:</label>
                    <input type="checkbox" id="is_correct_${questionIndex}_${optionIndex}" name="is_correct_${questionIndex}_${optionIndex}" /><br /><br />
                `;

                optionsContainer.appendChild(optionDiv);
                optionIndex++;
            });

            // Add an event listener for the question type dropdown
            const questionTypeDropdown = document.getElementById(`question_type_${questionIndex}`);
            questionTypeDropdown.addEventListener("change", () => {
                if (questionTypeDropdown.value === "open_ended") {
                    const correctAnswerInput = document.createElement("input");
                    correctAnswerInput.type = "text";
                    correctAnswerInput.id = `correct_answer_${questionIndex}`;
                    correctAnswerInput.name = `correct_answer_${questionIndex}`;
                    correctAnswerInput.placeholder = "Correct Answer";
                    correctAnswerContainer.appendChild(correctAnswerInput);
                } else {
                    // Remove the correct answer input field if question type is not open-ended
                    correctAnswerContainer.innerHTML = "";
                }
            });

            questionIndex++;
        });
    </script>
   


  </body>
</html>
